# 簡単台本(kantantaihon)

## 概要

シンプルなプレーンテキスト形式で台本を書きます。以下に簡単な例を示します。

```raw
魔女A: 正面やや右遠
あら～坊や、迷子かしら？
\se 足音
魔女B: 正面やや左遠
ふふふ…なんて可愛い坊やなの…
\se 足音
\p 正面
こんな夜更けに森をさまようなんて、危険よ～
\se 狼の遠吠え
\se 衣擦れの音
魔女A: 左
そうよねぇ…坊や
\p 左極近
お姉さんたちの家で、一晩過ごしていかない？
\ 主人公はうなずく。
```

プログラムによる変換を経て、カラフルで読みやすい HTML 台本に変換されます。

![image](https://github.com/femdomatelier/kantantaihon/blob/main/doc/html.png)

同様に、HTML 台本をブラウザで開き、Word にコピーすれば、既存のフォーマットと統合できます。

![image](https://github.com/femdomatelier/kantantaihon/blob/main/doc/word.png)

登場するキャラクターごとに名前をハイライトし（各キャラクターには専用の色が割り当てられ、声優が台本を読みやすくし、自分のセリフを見つけやすくなります）、さらにセリフの総文字数や各キャラクターごとのセリフの総文字数も集計できます。また、台本内に登場するすべての効果音も一覧に整理されます。

```raw
character count: 77
se: {'衣擦れの音', '狼の遠吠え', '足音'}
魔女A: 41
魔女B: 36
```

## 未来

以下は開発予定の機能です：

- 演技指示のコマンド
- 出力項目の選択（例えば、効果音やセリフ以外の部分を省略可能）
- HTML出力の縦書きレイアウト
- HTML出力時に行番号を表示できるようにする
- 読みやすく整理されたレポート
- 全体レポート（文字数、効果音、推定所要時間）
- フォルダ内の複数のファイルを一括処理する
- さらなるフォーマット設定

ご意見やご質問がありましたら、X（@femdom_atelier）またはメールでお気軽にご連絡ください。

## User Guide

### Prerequisite

Python 3.10.11+

### インストール

本プロジェクトのソースコードをダウンロードするか、または git clone を使用して取得し、プロジェクトのディレクトリ（つまり pyproject.toml が存在するディレクトリ）で以下のコマンドを実行してください。

```sh
pip install -e ./
```

### 実行

```sh
python -m kantantaihon <YOUR_SCRIPT>
```

例：

```sh
python -m kantantaihon tests/data/test.txt
```

完了すると、作業ディレクトリに output.html が生成されます。
output.html をブラウザで開くと、内容を Word や他のエディタにコピー＆ペーストしたり、直接 PDF として印刷したりできます。

### 書き方のフォーマットとコマンド

#### キャラクター

台本に複数のキャラクターが登場する場合、区別しやすくするために、そのキャラクターの単独または連続するセリフの前には、必ずキャラクター名を明記する必要があります。

```raw
<キャラクター名>:(指定位置)
```

すべての作家がキャラクター名の後に直接位置指定を記述するとは限らないため、キャラクター名のみの入力も許容します。

```raw
魔女A:
```

ただし、指示の位置は必ず「:」の後に記述する必要があります。

```raw
魔女A: 正面やや右遠
```

#### 位置

```raw
\p <位置>
```

例：

```raw
\p 左極近
\p 正面上
```

#### SE

```raw
\se <効果音の名前>
```

例：

```raw
\se 足音
```

#### 叙述

```raw
\ <叙述内容>
```

例：

```raw
\ 主人公はうなずく。
```
